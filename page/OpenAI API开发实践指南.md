# OpenAI APIå¼€å‘å®è·µæŒ‡å—

## ä¸€ã€APIå¯†é’¥è·å–å…¨æµç¨‹

### 1.1 è´¦æˆ·æ³¨å†ŒæŒ‡å¼•
è‹¥å·²æœ‰ChatGPTè´¦æˆ·å¯ç›´æ¥ç™»å½•OpenAIå¹³å°ï¼Œæ–°ç”¨æˆ·éœ€è®¿é—®å®˜ç½‘å®Œæˆæ³¨å†Œã€‚å›½å†…å¼€å‘è€…å»ºè®®é€šè¿‡åˆè§„æ¸ é“å®Œæˆè´¦æˆ·æ³¨å†Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹å¹³å°è·å–å·²æ¿€æ´»è´¦æˆ·ã€‚

!["APIå¯†é’¥ç®¡ç†ç•Œé¢"](https://bbtdd.com/wp-content/uploads/img/79785254.webp)

### 1.2 å¯†é’¥ç”Ÿæˆæ­¥éª¤
1. ç™»å½•åè¿›å…¥å·¦ä¾§å¯¼èˆªæ ã€API Keysã€‘
2. ç‚¹å‡»ã€Create new secret keyã€‘ç”Ÿæˆæ–°å¯†é’¥
3. **ç«‹å³ä¿å­˜**å¼¹å‡ºå¯¹è¯æ¡†ä¸­çš„å¯†é’¥ï¼ˆåç»­æ— æ³•å†æ¬¡æŸ¥çœ‹ï¼‰

> å¯†é’¥å®‰å…¨æ€§æç¤ºï¼šå»ºè®®é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†å¯†é’¥ï¼Œé¿å…ä»£ç ä»“åº“æ³„æ¼é£é™©

## äºŒã€APIé¢åº¦ç®¡ç†æŒ‡å—

### 2.1 è´¦æˆ·é¢åº¦æŸ¥è¯¢
- å¯¼èˆªè‡³ã€Usageã€‘æŸ¥çœ‹å®æ—¶ç”¨é‡
- å…³æ³¨Credit GrantsçŠ¶æ€æ ‡è¯†ï¼š
  - ç°è‰²ï¼šå¯ç”¨é¢åº¦
  - ç»¿è‰²ï¼šå·²ä½¿ç”¨
  - çº¢è‰²ï¼šå·²è¿‡æœŸ

!["é¢åº¦ç›‘æ§é¢æ¿"](https://bbtdd.com/wp-content/uploads/img/48075548327.webp)

### 2.2 å›½é™…æ”¯ä»˜æ–¹æ¡ˆ
åœ¨ã€Billingã€‘é¡µé¢æ·»åŠ æ”¯ä»˜æ–¹å¼æ—¶ï¼Œæ¨èä½¿ç”¨è™šæ‹Ÿä¿¡ç”¨å¡è§£å†³æ–¹æ¡ˆï¼š
ğŸ‘‰ [é‡å¡ | ä¸€åˆ†é’Ÿæ³¨å†Œï¼Œè½»æ¾è®¢é˜…æµ·å¤–çº¿ä¸ŠæœåŠ¡](https://bbtdd.com/yeka) ã€ä½¿ç”¨é‚€è¯·ç ACCPAYäº«ä¸“å±ä¼˜æƒ ã€‘

æ”¯ä»˜æ–¹å¼é…ç½®æµç¨‹ï¼š
1. è¿›å…¥æ”¯ä»˜æ–¹å¼è®¾ç½®ç•Œé¢
2. æ·»åŠ æ”¯æŒå›½é™…æ”¯ä»˜çš„ä¿¡ç”¨å¡
3. å®ŒæˆéªŒè¯æµç¨‹
4. ç‚¹å‡»ã€Add to credit balanceã€‘å……å€¼é¢åº¦

## ä¸‰ã€Pythonå¼€å‘ç¯å¢ƒæ­å»º

### 3.1 åŸºç¡€ç¯å¢ƒé…ç½®
- Python â‰¥3.7.1
- å»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·ï¼š
  bash
  conda create -n openai_env python=3.8
  conda activate openai_env
  

### 3.2 SDKå®‰è£…ä¸é…ç½®
python
pip install openai


å¯†é’¥ç®¡ç†æ–¹æ¡ˆå¯¹æ¯”ï¼š

| æ–¹æ¡ˆç±»å‹ | é€‚ç”¨åœºæ™¯ | é…ç½®æ–¹å¼ |
|---------|---------|---------|
| å…¨å±€å˜é‡ | å¤šé¡¹ç›®å…±äº« | ç³»ç»Ÿç¯å¢ƒå˜é‡é…ç½® |
| æœ¬åœ°é…ç½® | å•é¡¹ç›®éš”ç¦» | .envæ–‡ä»¶ç®¡ç† |

python
# ç¯å¢ƒå˜é‡è°ƒç”¨ç¤ºä¾‹
import os
from openai import OpenAI

client = OpenAI(api_key=os.getenv('OPENAI_API_KEY'))


## å››ã€æ ¸å¿ƒåŠŸèƒ½å¼€å‘å®è·µ

### 4.1 æ™ºèƒ½å¯¹è¯ç³»ç»Ÿ
python
response = client.chat.completions.create(
    model="gpt-3.5-turbo",
    messages=[
        {"role": "system", "content": "ä½ æ˜¯ä¸€ä½ç²¾é€šæœºå™¨å­¦ä¹ çš„æŠ€æœ¯ä½œå®¶"},
        {"role": "user", "content": "ç”¨æ¯”å–»è§£é‡Šç¥ç»ç½‘ç»œçš„å·¥ä½œåŸç†"}
    ]
)
print(response.choices[0].message.content)


å¯¹è¯ç»ˆæ­¢çŠ¶æ€è§£æï¼š

| finish_reason | è¯´æ˜ |
|--------------|-----|
| stop         | å®Œæˆè¾“å‡º |
| length       | è¾¾tokenä¸Šé™ |
| content_filter | å†…å®¹è¿‡æ»¤ |

### 4.2 å›¾åƒç†è§£ä¸ç”Ÿæˆ
è§†è§‰æ¨¡å‹åº”ç”¨ç¤ºä¾‹ï¼š
python
# å›¾åƒæè¿°è§£æ
response = client.chat.completions.create(
    model="gpt-4-vision-preview",
    messages=[{
        "role": "user",
        "content": [
            {"type": "text", "text": "æè¿°å›¾ç‰‡å†…å®¹"},
            {"type": "image_url", "image_url": {"url": ""}}
        ]
    }]
)


![åŸå¸‚æ™¯è§‚ç¤ºä¾‹](https://bbtdd.com/wp-content/uploads/img/43607468818963.webp)

### 4.3 ç»“æ„åŒ–æ•°æ®è¾“å‡º
JSONæ¨¡å¼åº”ç”¨æŠ€å·§ï¼š
python
response = client.chat.completions.create(
    model="gpt-3.5-turbo",
    response_format={"type": "json_object"},
    messages=[
        {"role": "system", "content": "å§‹ç»ˆè¿”å›JSONæ ¼å¼æ•°æ®"},
        {"role": "user", "content": "ç”Ÿæˆ3ä¸ªæœºå™¨å­¦ä¹ æœ¯è¯­åŠè§£é‡Š"}
    ]
)


ğŸ‘‰ [é‡å¡ | è·å–å›½é™…æ”¯ä»˜è§£å†³æ–¹æ¡ˆ](https://bbtdd.com/yeka) æ”¯æŒå¼€å‘è€…æŒç»­è·å–AIæœåŠ¡èµ„æº